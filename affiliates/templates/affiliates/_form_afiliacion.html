{% comment %}
Este archivo contiene el formulario unificado y dinámico.
Se basa en el ejemplo que proporcionaste, usando fieldsets y secciones que se ocultan.
{% endcomment %}

<style>
    /* Estilos para un formulario moderno y limpio */
    .form-section {
        border: 1px solid #e9ecef;
        border-radius: 8px;
        padding: 25px;
        margin-bottom: 25px;
    }
    .form-section legend {
        font-size: 1.1rem; /* 17.6px */
        font-weight: 600;
        color: #32325d;
        padding: 0 10px;
        width: auto;
    }
    .radio-group-form {
        display: flex;
        flex-wrap: wrap;
        gap: 15px;
    }
    .radio-group-form input[type="radio"] {
        display: none;
    }
    .radio-group-form label {
        background-color: #f6f9fc;
        color: #525f7f;
        padding: 10px 18px;
        border-radius: 8px;
        cursor: pointer;
        transition: all 0.2s ease-in-out;
        border: 1px solid #dee2e6;
        font-weight: 600;
    }
    .radio-group-form input[type="radio"]:checked + label {
        background-color: #5e72e4;
        color: #ffffff;
        border-color: #5e72e4;
        box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
    }
    .hidden {
        display: none;
    }
    .form-control-label {
        font-size: .875rem;
        font-weight: 600;
        color: #525f7f;
    }
    /* Estilo para los campos de carga de archivos */
    .custom-file-label::after {
        content: "Elegir";
    }
</style>

<form id="afiliacionUnificadaForm" method="POST" enctype="multipart/form-data">
    {% csrf_token %}

    <fieldset class="form-section">
        <legend><i class="ni ni-single-02 mr-2"></i>Tipo de Solicitante</legend>
        <div class="radio-group-form">
            <input type="radio" id="tipoNatural" name="tipo_solicitante" value="natural">
            <label for="tipoNatural">Persona Natural</label>
            
            <input type="radio" id="tipoJuridica" name="tipo_solicitante" value="juridica">
            <label for="tipoJuridica">Persona Jurídica</label>
        </div>
    </fieldset>

    <div id="seccionNatural" class="hidden">
        <fieldset class="form-section">
            <legend><i class="ni ni-badge mr-2"></i>Información Personal Básica</legend>
            <div class="row">
                <div class="col-md-6"><div class="form-group"><label class="form-control-label">Nombres</label><input class="form-control" type="text" name="natural_nombres"></div></div>
                <div class="col-md-6"><div class="form-group"><label class="form-control-label">Apellidos</label><input class="form-control" type="text" name="natural_apellidos"></div></div>
            </div>
            <div class="form-group"><label class="form-control-label">Correo Electrónico</label><input class="form-control" type="email" name="natural_email"></div>
            <div class="form-group"><label class="form-control-label">Celular</label><input class="form-control" type="text" name="natural_celular"></div>
        </fieldset>
        <fieldset class="form-section">
            <legend><i class="ni ni-cloud-upload-96 mr-2"></i>Documentos Requeridos</legend>
            <div class="form-group"><label class="form-control-label">Copia de la cédula de ciudadanía</label><div class="custom-file"><input type="file" class="custom-file-input" name="natural_cedula_file"><label class="custom-file-label">Elegir archivo</label></div></div>
            <div class="form-group"><label class="form-control-label">Copia del RUC</label><div class="custom-file"><input type="file" class="custom-file-input" name="natural_ruc_file"><label class="custom-file-label">Elegir archivo</label></div></div>
        </fieldset>
    </div>

    <div id="seccionJuridica" class="hidden">
        <fieldset class="form-section">
            <legend><i class="ni ni-building mr-2"></i>Datos de la Empresa</legend>
            <div class="form-group"><label class="form-control-label">Razón Social</label><input class="form-control" type="text" name="juridica_razon_social"></div>
            <div class="form-group"><label class="form-control-label">Nombre Comercial</label><input class="form-control" type="text" name="juridica_nombre_comercial"></div>
            <div class="form-group"><label class="form-control-label">Logo de su empresa o negocio</label><div class="custom-file"><input type="file" class="custom-file-input" name="juridica_logo_file"><label class="custom-file-label">Elegir archivo</label></div></div>
        </fieldset>
        <fieldset class="form-section">
            <legend><i class="ni ni-circle-08 mr-2"></i>Datos del Representante Legal</legend>
            <div class="form-group"><label class="form-control-label">Nombres y Apellidos</label><input class="form-control" type="text" name="juridica_rep_legal_nombres"></div>
            <div class="form-group"><label class="form-control-label">Cédula</label><input class="form-control" type="text" name="juridica_rep_legal_cedula"></div>
        </fieldset>
        <fieldset class="form-section">
            <legend><i class="ni ni-collection mr-2"></i>Documentos Requeridos</legend>
            <div class="form-group"><label class="form-control-label">Copia de RUC</label><div class="custom-file"><input type="file" class="custom-file-input" name="juridica_ruc_file"><label class="custom-file-label">Elegir archivo</label></div></div>
            <div class="form-group"><label class="form-control-label">Copia de escritura de constitución</label><div class="custom-file"><input type="file" class="custom-file-input" name="juridica_escritura_file"><label class="custom-file-label">Elegir archivo</label></div></div>
            <div class="form-group"><label class="form-control-label">Copia de cédula del representante legal</label><div class="custom-file"><input type="file" class="custom-file-input" name="juridica_cedula_rep_file"><label class="custom-file-label">Elegir archivo</label></div></div>
        </fieldset>
        <fieldset class="form-section">
            <legend><i class="ni ni-mobile-button mr-2"></i>Datos de Contacto Adicionales</legend>
            <div class="form-group"><label class="form-control-label">Teléfonos de contacto para la lista de difusión de WhatsApp</label><input class="form-control" type="text" name="juridica_whatsapp"></div>
            <div class="form-group"><label class="form-control-label">Link de su página web para la guía comercial</label><input class="form-control" type="url" placeholder="https://ejemplo.com" name="juridica_website"></div>
        </fieldset>
    </div>
    
    <div class="text-center mt-4">
        <button type="submit" class="btn btn-success btn-lg">Completar Afiliación</button>
    </div>
</form>