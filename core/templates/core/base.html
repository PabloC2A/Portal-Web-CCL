{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="utf-8"/>
    <meta
            name="viewport"
            content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>{% block title %}Cámara de Comercio de Loja{% endblock %}</title>

    <link href="{% static 'img/favicon.png' %}" rel="icon" type="image/png"/>

    <link
            href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600,700"
            rel="stylesheet"
    />
    <link href="{% static 'css/nucleo-icons.css' %}" rel="stylesheet"/>
    <link href="{% static 'css/font-awesome.css' %}" rel="stylesheet"/>

    <link
            type="text/css"
            href="{% static 'css/argon-design-system.min.css' %}"
            rel="stylesheet"
    />

    <link href="{% static 'css/custom.css' %}" rel="stylesheet"/>
</head>
<body class="bg-white">

  <div id="preloader">
    <img src="{% static 'img/CCL_Logo2.jpg' %}" alt="Cargando...">
  </div>
<nav
  id="navbar-main"
  class="navbar navbar-main navbar-expand-lg 
         {% if request.path == '/' %}navbar-transparent{% else %}bg-white shadow-sm sticky-top{% endif %}"
>
    <div class="container">
        <a class="navbar-brand mr-lg-5" href="{% url 'index' %}">
            <img
                    src='{% static "img/CCL_Logo.png" %}'
                    alt="Logo Cámara de Comercio de Loja"
                    class="navbar-brand-logo"
            />
        </a>
        <button
                class="navbar-toggler"
                type="button"
                data-toggle="collapse"
                data-target="#navbar_global"
        >
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="navbar-collapse collapse" id="navbar_global">
            <ul class="navbar-nav navbar-nav-hover align-items-lg-center">
                <li class="nav-item {% if request.resolver_match.url_name == 'servicios' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'servicios' %}">Servicios</a>
                </li>
                <li class="nav-item {% if request.resolver_match.url_name == 'nosotros' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'nosotros' %}">Nosotros</a>
                </li>
                <li class="nav-item {% if request.resolver_match.url_name == 'socios' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'socios' %}">Socios</a>
                </li>
                <li class="nav-item {% if request.resolver_match.url_name == 'noticias' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'noticias' %}">Noticias</a>
                </li>
                <li class="nav-item {% if request.resolver_match.url_name == 'contacto' %}active{% endif %}">
                    <a class="nav-link" href="{% url 'contacto' %}">Contacto</a>
                </li>
            </ul>
            <ul class="navbar-nav align-items-lg-center ml-lg-auto">
                <li class="nav-item d-none d-lg-block ml-lg-4">
                    <a href="{% url 'afiliacion' %}" class="btn btn-warning btn-sm btn-animado">
                        <span class="nav-link-inner--text">Afíliate</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="{% url 'login' %}" class="btn btn-primary btn-sm btn-animado">
                        <span class="nav-link-inner--text">Ingresar</span>
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<main>
    <div class="container pt-3">
        {% if messages %}
            {% for message in messages %}
                <div class="alert alert-{{ message.tags }} alert-dismissible fade show" role="alert">
                    {{ message }}
                    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
            {% endfor %}
        {% endif %}
    </div>
    {% block content %}{% endblock %}
</main>

<footer class="footer footer-custom-bg text-white pt-5">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 mb-5 mb-lg-0">
                <a class="footer-brand" href="{% url 'index' %}">
                    <img
                            src="{% static 'img/CCL_Logo2.jpg' %}"
                            width="140"
                            alt="CCL Logo"
                    />
                </a>
                <p class="text-white-50 mt-3 pr-lg-4">
                    Liderando el desarrollo empresarial en la región sur del Ecuador
                    desde 1973.
                </p>
                <div class="mt-4">
                    <h6 class="text-white">Síguenos en redes</h6>
                    <a
                            href="#"
                            class="btn btn-icon-only btn-neutral rounded-circle"
                            data-toggle="tooltip"
                            title="Facebook"
                    >
                        <i class="fa fa-facebook-square"></i>
                    </a>
                    <a
                            href="#"
                            class="btn btn-icon-only btn-neutral rounded-circle"
                            data-toggle="tooltip"
                            title="Instagram"
                    >
                        <i class="fa fa-instagram"></i>
                    </a>
                    <a
                            href="#"
                            class="btn btn-icon-only btn-neutral rounded-circle"
                            data-toggle="tooltip"
                            title="Twitter"
                    >
                        <i class="fa fa-twitter"></i>
                    </a>
                </div>
            </div>
            <div class="col-lg-2 col-6 mb-4 mb-lg-0">
                <h6 class="text-white text-uppercase">Institución</h6>
                <ul class="list-unstyled">
                    <li>
                        <a href="{% url 'nosotros' %}" class="text-white-50"
                        >Nosotros</a
                        >
                    </li>
                    <li>
                        <a href="{% url 'socios' %}" class="text-white-50">Socios</a>
                    </li>
                    <li><a href="#" class="text-white-50">Transparencia</a></li>
                </ul>
            </div>
            <div class="col-lg-3 col-6 mb-4 mb-lg-0">
                <h6 class="text-white text-uppercase">Servicios</h6>
                <ul class="list-unstyled">
                    <li><a href="#" class="text-white-50">Asesoría Legal</a></li>
                    <li><a href="#" class="text-white-50">Capacitación</a></li>
                    <li><a href="#" class="text-white-50">Arbitraje</a></li>
                    <li>
                        <a href="{% url 'servicios' %}" class="text-white-50"
                        >Ver todos</a
                        >
                    </li>
                </ul>
            </div>
            <div class="col-lg-3">
                <h6 class="text-white text-uppercase">Contacto</h6>
                <ul class="list-unstyled">
                    <li class="text-white-50">
                        <i class="fa fa-map-marker mr-2"></i>Rocafuerte y Bolívar 153-37
                    </li>
                    <li class="text-white-50">
                        <i class="fa fa-phone mr-2"></i>(07) 257 1389
                    </li>
                    <li class="text-white-50">
                        <i class="fa fa-envelope mr-2"></i>info@camaradecomercioloja.org
                    </li>
                </ul>
            </div>
        </div>
        <hr class="my-4" style="border-color: rgba(255, 255, 255, 0.1)"/>
        <div class="row align-items-center justify-content-center">
            <div class="col-md-12 text-center">
                <p class="mb-0 text-white-50">
                    © {% now "Y" %} Cámara de Comercio de Loja. Todos los derechos
                    reservados.
                </p>
            </div>
        </div>
    </div>
</footer>

<script src="{% static 'js/core/jquery.min.js' %}"></script>
<script src="{% static 'js/core/popper.min.js' %}"></script>
<script src="{% static 'js/core/bootstrap.min.js' %}"></script>
<script src="{% static 'js/argon-design-system.min.js' %}"></script>

{% block modals %}{% endblock %}

{% block scripts %}{% endblock %}
<script>
  document.addEventListener('DOMContentLoaded', function() {
    
    // --- LÓGICA PARA EL PRELOADER ---
    const preloader = document.getElementById('preloader');
    if (preloader) {
      preloader.classList.add('preloader-hidden');
      setTimeout(() => {
        if (preloader.parentNode) {
          preloader.parentNode.removeChild(preloader);
        }
      }, 800);
    }

    // --- LÓGICA PARA EL NAVBAR TRANSPARENTE ---
    const navbar = document.getElementById('navbar-main');
    if (window.location.pathname === '/' && navbar) {
      const handleScroll = () => {
        if (window.scrollY > 50) {
          navbar.classList.remove('navbar-transparent');
          navbar.classList.add('navbar-solid');
        } else {
          navbar.classList.add('navbar-transparent');
          navbar.classList.remove('navbar-solid');
        }
      };
      window.addEventListener('scroll', handleScroll);
    }

    // --- LÓGICA PARA TODAS LAS ANIMACIONES AL HACER SCROLL ---
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          // Animaciones de deslizamiento
          if (entry.target.classList.contains('animar-desde-derecha') || entry.target.classList.contains('animar-desde-izquierda') || entry.target.classList.contains('animar-desde-abajo')) {
            entry.target.classList.add('visible');
            observer.unobserve(entry.target);
          }
          // LÓGICA RESTAURADA: Animación de escritura
          if (entry.target.classList.contains('animar-texto')) {
            startTypingAndErasingLoop(entry.target);
            observer.unobserve(entry.target);
          }
        }
      });
    }, {
      threshold: 0.2
    });

    // LÍNEA RESTAURADA: Le decimos que también vigile a '.animar-texto'
    const elementosAnimados = document.querySelectorAll('.animar-desde-derecha, .animar-desde-izquierda, .animar-desde-abajo, .animar-texto');
    elementosAnimados.forEach(el => observer.observe(el));

    // FUNCIÓN RESTAURADA: La lógica para escribir y borrar
    function startTypingAndErasingLoop(element) {
        // El texto a animar AHORA VIVE AQUÍ, dentro del script
        const textToType = '¿Listo Para Impulsar tu Negocio?';
        const typingSpeed = 100;
        const erasingSpeed = 50;
        const pauseDuration = 2000;

        let i = 0;
        let isErasing = false;

        function animateText() {
            const cursor = '<span class="typing-cursor"></span>';
            let textToShow = textToType.substring(0, i);
            
            element.innerHTML = textToShow + cursor;

            if (!isErasing && i < textToType.length) {
                // Escribiendo
                i++;
                setTimeout(animateText, typingSpeed);
            } else if (isErasing && i > 0) {
                // Borrando
                i--;
                setTimeout(animateText, erasingSpeed);
            } else {
                // Cambiando de fase
                isErasing = !isErasing;
                if (!isErasing) {
                  element.innerHTML = ''; // Borra el cursor al final
                }
                setTimeout(animateText, isErasing ? pauseDuration : 500);
            }
        }
        // Inicia el ciclo de animación
        animateText();
    }
  });
</script>
    
</body>
</html>